# Shell

+ 脚本语言：不需要编译，直接逐行执行
+ 解释性语言：适合编写自动化任务

## shell分类

流行的shell有ash、bash、ksh、csh、zsh等，不同的shell都有各自的特点及用途

+ Linux中默认的shell是/bin/bash

### 编写规范

```shell
#!/bin/bash #表示告知系统要使用的shell解释器
相关命令
```

### 文件命名规范

`file.sh`

#### Bash 常用快捷键

| 快捷键     | 作用                                                         |
| ---------- | ------------------------------------------------------------ |
| `Ctrl + A` | 把光标移动到命令行开头。如果我们输入的命令过长，想要把光标移动到命令行开头时使用。 |
| `Ctrl + E` | 把光标移动到命令行结尾。                                     |
| `Ctrl + C` | 强制终止当前的命令。                                         |
| `Ctrl + L` | 清屏，相当于 `clear` 命令。                                  |
| `Ctrl + U` | 删除或剪切光标之前的命令。对于很长的命令，可以快速删除而无需使用退格键。 |
| `Ctrl + K` | 删除或剪切光标之后的内容。                                   |
| `Ctrl + Y` | 粘贴 `Ctrl + U` 或 `Ctrl + K` 剪切的内容。                   |
| `Ctrl + R` | 在历史命令中搜索，按下 `Ctrl + R` 后输入搜索内容即可查找历史命令。 |
| `Ctrl + D` | 退出当前终端。                                               |
| `Ctrl + Z` | 暂停当前命令，并放入后台。与工作管理相关，在系统管理章节详细介绍。 |
| `Ctrl + S` | 暂停屏幕输出。                                               |
| `Ctrl + Q` | 恢复屏幕输出。                                               |

### 输入输出重定向

#### 标准输入输出

| 设备   | 设备名      | 文件描述符 | 类型         |
| ------ | ----------- | ---------- | ------------ |
| 键盘   | /dev/stdin  | 0          | 标准输入     |
| 显示器 | /dev/stdout | 1          | 标准输出     |
| 显示器 | /dev/stderr | 2          | 标准错误输出 |

#### 输入重定向

| 类型                       | 符号（语法）       | 功能                                                 |
| -------------------------- | ------------------ | ---------------------------------------------------- |
| 标准输入                   | 命令<文件1         | 命令把文件1的内容作为标准输入设备                    |
| 标识符限定输入             | 命令<<标识符       | 命令把标准输入中读入内容，直到遇到“标识符”分解符为止 |
| 输入输出重定向（同时使用） | 命令< 文件1 >文件2 | 命令把文件1的内容作为标准输入，把文件2作为标准输出。 |

#### 输出重定向

| 类型                       | 符号                      | 作用                                                       |
| -------------------------- | ------------------------- | ---------------------------------------------------------- |
| 标准输出重定向             | `命令 > 文件`             | 以覆盖方式，将命令的正确输出内容保存到指定的文件或设备中。 |
| 标准输出重定向             | `命令 >> 文件`            | 以追加方式，将命令的正确输出内容保存到指定的文件或设备中。 |
| 标准错误输出重定向         | `错误命令 2> 文件`        | 以覆盖方式，将命令的错误输出保存到指定的文件或设备中。     |
| 标准错误输出重定向         | `错误命令 2>> 文件`       | 以追加方式，将命令的错误输出保存到指定的文件或设备中。     |
| 正确输出和错误输出同时保存 | `命令 > 文件 2>&1`        | 以覆盖方式，将正确输出和错误输出都保存到同一个文件中。     |
| 正确输出和错误输出同时保存 | `命令 >> 文件 2>&1`       | 以追加方式，将正确输出和错误输出都保存到同一个文件中。     |
| 正确输出和错误输出同时保存 | `命令 &> 文件`            | 以覆盖方式，将正确输出和错误输出都保存到同一个文件中。     |
| 正确输出和错误输出同时保存 | `命令 &>> 文件`           | 以追加方式，将正确输出和错误输出都保存到同一个文件中。     |
| 正确输出和错误输出分别保存 | `命令 >> 文件1 2>> 文件2` | 将正确输出追加到文件1中，将错误输出追加到文件2中。         |

#### /dev/null 文件

+ 如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到**/dev/null**中
  `command > dev/null`

### 多命令执行顺序

| 多命令执行符 | 格式           | 作用                                                         |
| ------------ | -------------- | ------------------------------------------------------------ |
| ；           | 命令1 ；命令2  | 多个命令顺序执行，命令之间没有任何逻辑联系                   |
| &&           | 命令1&&命令2   | 当命令1正确执行（? = 0 ） ， 则 命 令 2 才 会 执 行 当 命 令 1 执 行 不 正 确 （ ?=0），则命令2才会执行 当命令1执行不正确（?=0），则命令2才会执行当命令1执行不正确（?≠0），则命令2不会执行 |
| \|\|         | 命令1\|\|命令2 | 当命令1执行不正确（? ≠ 0 ） ， 则 命 令 2 才 会 执 行 当 命 令 1 正 确 执 行 （ ?≠0），则命令2才会执行当命令1正确执行（? <br/>\\<br/><br/> =0），则命令2才会执行当命令1正确执行（?=0），则命令2不会执行 |

### 执行shell脚本

1. 给文件增加执行权限

   ```shell
   chmod +x myshell.sh
   ./myshel.sh
   ```

2. 通过Bash调用执行脚本

   ```shell
   bash myshell.sh
   ```

   

## shell变量

### 命名规则

> 1. 首字符不能数字开头，是能使用英文字母，数字和下划线
>
> 2. 等号左右两侧不能有空格，可以使用下划线'_'，变量的值如果有空格，需要使用单引号或者双引号包括。
>    `test="hello world!"`
>
> 3. 不能使用标点符号，不能使用关键字（help查看保留关键字）
>
> 4. 环境变量建议大写，便于区分
>
> 5. 如果需要增加变量的值，可以进行变量值的叠加。不过变量需要双引号包含”&变量名“或用￥{变量名}包含变量名。
>
>    ```shell
>    test=123
>    test="$test"456
>    echo $test #123456
>    test=${test}789
>    echo $test #123456789
>    ```

+ 单双引号
  + 双引号能够识别变量，双引号能够实现转义（类似于\\*”）
  + 单引号是不能识别变量，只会原样输出，单引号不能转义

#### shell中特殊符号



| 符号 | 作用                                                         |
| ---- | ------------------------------------------------------------ |
| ’ ’  | 单引号。在单引号中所有的特殊符号，如“$”和”(反引号)都没有特殊含义。单引号括起来的都是普通字符，会原样输出 |
| " "  | 双引号。在双引号中特殊符号都没有特殊含义，但是“$”，"`"（esc键下面）和“\”是例外，拥有“调用变量的值”、“引用命令”和“转义符”的特殊含义。 |
| ``   | 反引号。反引号括起来的内容是系统命令，在Bash中会先执行它。和( ) 作 用 一 样 ，不过推荐使用()，因为反引号非常容易看错 |
| $()  | 和反引号作用一样，用来引用系统命令。(推荐使用)               |
| ()   | 用于一串命令执行时，()中的命令会在子Shell中运行              |
| {}   | 用于一串命令执行时，{ }中的命令会在当前Shell中执行。也可以用于变量变形与替换。 |
| [ ]  | 用于变量的测试。                                             |
| #    | 在Shell脚本中，#开头的行代表注释。                           |
| $    | 用于调用变量的值，如需要调用变量name的值时，需要用$name的方式得到变量的值。 |
| \    | 转义符，跟在\之后的特殊符号将失去特殊含义，变为普通字符。如$将输出“$”符号，而不当做是变量引用。 |










